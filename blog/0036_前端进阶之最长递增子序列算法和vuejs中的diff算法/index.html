<!DOCTYPE html><html lang="en" data-astro-cid-bvzihdzo> <head><!-- Global Metadata --><meta charset="utf-8"><meta name="viewport" content="width=device-width,initial-scale=1"><!-- <link rel="shortcut icon"  href="/favicon.svg" /> --><link rel="apple-touch-icon" sizes="180x180" href="/apple-touch-icon.png"><link rel="icon" type="image/png" sizes="32x32" href="/favicon-32x32.png"><link rel="icon" type="image/png" sizes="16x16" href="/favicon-16x16.png"><link rel="icon" href="/favicon.ico"><link rel="manifest" href="/site.webmanifest"><meta name="generator" content="Astro v4.6.1"><!-- Font preloads --><link rel="preload" href="/fonts/JetBrainsMono-Regular.woff2" as="font" type="font/woff" crossorigin><link rel="preload" href="/fonts/JetBrainsMono-Bold.woff2" as="font" type="font/woff" crossorigin><link rel="preload" href="/fonts/JetBrainsMono-Light.woff2" as="font" type="font/woff" crossorigin><!-- Canonical URL --><link rel="canonical" href="https://hufeispace.com/blog/0036_%E5%89%8D%E7%AB%AF%E8%BF%9B%E9%98%B6%E4%B9%8B%E6%9C%80%E9%95%BF%E9%80%92%E5%A2%9E%E5%AD%90%E5%BA%8F%E5%88%97%E7%AE%97%E6%B3%95%E5%92%8Cvuejs%E4%B8%AD%E7%9A%84diff%E7%AE%97%E6%B3%95/"><!-- Primary Meta Tags --><title>å‰ç«¯è¿›é˜¶ä¹‹æœ€é•¿é€’å¢å­åºåˆ—ç®—æ³•å’Œvue.jsä¸­çš„Diffç®—æ³•</title><meta name="title" content="å‰ç«¯è¿›é˜¶ä¹‹æœ€é•¿é€’å¢å­åºåˆ—ç®—æ³•å’Œvue.jsä¸­çš„Diffç®—æ³•"><meta name="description" content=""><!-- Open Graph / Facebook --><meta property="og:type" content="website"><meta property="og:url" content="https://hufeispace.com/blog/0036_%E5%89%8D%E7%AB%AF%E8%BF%9B%E9%98%B6%E4%B9%8B%E6%9C%80%E9%95%BF%E9%80%92%E5%A2%9E%E5%AD%90%E5%BA%8F%E5%88%97%E7%AE%97%E6%B3%95%E5%92%8Cvuejs%E4%B8%AD%E7%9A%84diff%E7%AE%97%E6%B3%95/"><meta property="og:title" content="å‰ç«¯è¿›é˜¶ä¹‹æœ€é•¿é€’å¢å­åºåˆ—ç®—æ³•å’Œvue.jsä¸­çš„Diffç®—æ³•"><meta property="og:description" content=""><meta property="og:image" content="https://hufeispace.com/blog-placeholder-1.jpg"><!-- Twitter --><meta property="twitter:card" content="summary_large_image"><meta property="twitter:url" content="https://hufeispace.com/blog/0036_%E5%89%8D%E7%AB%AF%E8%BF%9B%E9%98%B6%E4%B9%8B%E6%9C%80%E9%95%BF%E9%80%92%E5%A2%9E%E5%AD%90%E5%BA%8F%E5%88%97%E7%AE%97%E6%B3%95%E5%92%8Cvuejs%E4%B8%AD%E7%9A%84diff%E7%AE%97%E6%B3%95/"><meta property="twitter:title" content="å‰ç«¯è¿›é˜¶ä¹‹æœ€é•¿é€’å¢å­åºåˆ—ç®—æ³•å’Œvue.jsä¸­çš„Diffç®—æ³•"><meta property="twitter:description" content=""><meta property="twitter:image" content="https://hufeispace.com/blog-placeholder-1.jpg"><style>:root{--accent: #2337ff;--accent-dark: #000d8a;--black: 15, 18, 25;--gray: 96, 115, 159;--gray-light: 229, 233, 240;--gray-dark: 34, 41, 57;--gray-gradient: rgba(var(--gray-light), 50%), #fff;--box-shadow: 0 2px 6px rgba(var(--gray), 25%), 0 8px 24px rgba(var(--gray), 33%), 0 16px 32px rgba(var(--gray), 33%);--bgColor-transparent: #00000000;--bgColor-neutral-muted: #636e7b66}@font-face{font-family:JetBrainsMono;src:url(/fonts/JetBrainsMono-Regular.woff2) format("woff");font-weight:400;font-style:normal;font-display:swap}@font-face{font-family:JetBrainsMono;src:url(/fonts/JetBrainsMono-Light.woff2) format("woff");font-weight:200;font-style:normal;font-display:swap}@font-face{font-family:JetBrainsMono;src:url(/fonts/JetBrainsMono-Bold.woff2) format("woff");font-weight:700;font-style:normal;font-display:swap}body{font-family:JetBrainsMono,Microsoft YaHei,Heiti SC,tahoma,arial,Hiragino Sans GB;margin:0;padding:0;text-align:left;background:linear-gradient(var(--gray-gradient)) no-repeat;background-size:100% 600px;word-wrap:break-word;overflow-wrap:break-word;color:rgb(var(--gray-dark));line-height:1.5}main{width:720px;max-width:calc(100% - 2em);margin:auto;padding:2em 1em}h1,h2,h3,h4,h5,h6{margin:0 0 .5rem;color:rgb(var(--black));line-height:1.2}h1{font-size:3.052em}h2{font-size:2.441em}h3{font-size:1.953em}h4{font-size:1.563em}h5{font-size:1.25em}strong,b{font-weight:700}a{font-weight:700;text-decoration:none}a:hover{color:var(--accent)}p{margin-bottom:1em}.prose p{margin-bottom:2em}textarea{width:100%;font-size:16px}input{font-size:16px}table{width:100%}img{max-width:100%;border-radius:8px}code{padding:.2em .4em;margin:0;font-size:85%;white-space:break-spaces;border-radius:6px;background-color:rgb(var(--gray-light));font-family:JetBrainsMono}pre{padding:.7em;border-radius:8px}pre>code{all:unset}blockquote{border-left:4px solid var(--accent);padding:0 0 0 20px;margin:0;font-size:1.333em}hr{border:none;border-top:1px solid rgb(var(--gray-light))}@media (max-width: 720px){body{font-size:12px}main{padding:1em}}.sr-only{border:0;padding:0;margin:0;position:absolute!important;height:1px;width:1px;overflow:hidden;clip:rect(1px 1px 1px 1px);clip:rect(1px,1px,1px,1px);clip-path:inset(50%);white-space:nowrap}a[data-astro-cid-eimmu3lg]{display:inline-block;text-decoration:none}a[data-astro-cid-eimmu3lg].active{font-weight:bolder;text-decoration:underline}header[data-astro-cid-3ef6ksr2]{margin:0;padding:0 1em;background:#fff;box-shadow:0 2px 8px rgba(var(--black),5%)}h2[data-astro-cid-3ef6ksr2]{margin:0;font-size:1em}h2[data-astro-cid-3ef6ksr2] a[data-astro-cid-3ef6ksr2],h2[data-astro-cid-3ef6ksr2] a[data-astro-cid-3ef6ksr2].active{text-decoration:none}nav[data-astro-cid-3ef6ksr2]{margin:0 auto;max-width:980px;display:flex;align-items:center;justify-content:space-between}nav[data-astro-cid-3ef6ksr2] a[data-astro-cid-3ef6ksr2]{padding:1em .5em;color:var(--black);border-bottom:4px solid transparent;text-decoration:none}nav[data-astro-cid-3ef6ksr2] a[data-astro-cid-3ef6ksr2].active{text-decoration:none;border-bottom-color:var(--accent)}.social-links[data-astro-cid-3ef6ksr2],.social-links[data-astro-cid-3ef6ksr2] a[data-astro-cid-3ef6ksr2]{display:flex}@media (max-width: 720px){.social-links[data-astro-cid-3ef6ksr2]{display:none}}footer[data-astro-cid-sz7xmlte]{grid-area:footer;text-align:center;display:flex;align-items:center;justify-content:center;padding:1.5em}footer[data-astro-cid-sz7xmlte] a[data-astro-cid-sz7xmlte]{font-weight:200;font-size:12px;color:#c8c8c8}footer[data-astro-cid-sz7xmlte] a[data-astro-cid-sz7xmlte]:not(.unset){background-image:none}.gradient-link[data-astro-cid-sz7xmlte]{position:relative;box-decoration-break:clone;text-decoration:none}.gradient-link[data-astro-cid-sz7xmlte]:hover:after{transform:translateZ(0) scale(1)}.gradient-link[data-astro-cid-sz7xmlte]:after{left:0;right:0;bottom:-2px;content:"";height:2px;position:absolute;transform:translateZ(0) scaleX(0);transform-origin:left center;transition:all .15s ease-in-out}
main[data-astro-cid-bvzihdzo]{width:calc(100% - 2em);max-width:100%;margin:0}.hero-image[data-astro-cid-bvzihdzo]{width:100%}.hero-image[data-astro-cid-bvzihdzo] img[data-astro-cid-bvzihdzo]{display:block;margin:0 auto;border-radius:12px;box-shadow:var(--box-shadow)}.prose[data-astro-cid-bvzihdzo]{width:960px;max-width:calc(100% - 2em);margin:auto;padding:1em;color:rgb(var(--gray-dark))}.title[data-astro-cid-bvzihdzo]{margin-bottom:1em;padding:1em 0;text-align:center;line-height:1}.title[data-astro-cid-bvzihdzo] h1[data-astro-cid-bvzihdzo]{margin:0 0 .5em}.date[data-astro-cid-bvzihdzo]{margin-bottom:.5em;color:rgb(var(--gray))}.last-updated-on[data-astro-cid-bvzihdzo]{font-style:italic}
</style></head> <body data-astro-cid-bvzihdzo> <header data-astro-cid-3ef6ksr2> <nav data-astro-cid-3ef6ksr2> <h2 data-astro-cid-3ef6ksr2><a href="/" data-astro-cid-3ef6ksr2>HuFei&#39;s Site</a></h2> <div class="internal-links" data-astro-cid-3ef6ksr2> <a href="/" data-astro-cid-3ef6ksr2 data-astro-cid-eimmu3lg> HOME </a>  <a href="/blog" class="active" data-astro-cid-3ef6ksr2 data-astro-cid-eimmu3lg> BLOG </a>  </div> <div class="social-links" data-astro-cid-3ef6ksr2> <a href="https://github.com/hufei365" target="_blank" data-astro-cid-3ef6ksr2> <span class="sr-only" data-astro-cid-3ef6ksr2>HuFei's GitHub</span> <svg viewBox="0 0 16 16" aria-hidden="true" width="32" height="32" data-astro-cid-3ef6ksr2><path fill="currentColor" d="M8 0C3.58 0 0 3.58 0 8c0 3.54 2.29 6.53 5.47 7.59.4.07.55-.17.55-.38 0-.19-.01-.82-.01-1.49-2.01.37-2.53-.49-2.69-.94-.09-.23-.48-.94-.82-1.13-.28-.15-.68-.52-.01-.53.63-.01 1.08.58 1.23.82.72 1.21 1.87.87 2.33.66.07-.52.28-.87.51-1.07-1.78-.2-3.64-.89-3.64-3.95 0-.87.31-1.59.82-2.15-.08-.2-.36-1.02.08-2.12 0 0 .67-.21 2.2.82.64-.18 1.32-.27 2-.27.68 0 1.36.09 2 .27 1.53-1.04 2.2-.82 2.2-.82.44 1.1.16 1.92.08 2.12.51.56.82 1.27.82 2.15 0 3.07-1.87 3.75-3.65 3.95.29.25.54.73.54 1.48 0 1.07-.01 1.93-.01 2.2 0 .21.15.46.55.38A8.012 8.012 0 0 0 16 8c0-4.42-3.58-8-8-8z" data-astro-cid-3ef6ksr2></path></svg> </a> </div> </nav> </header>  <main data-astro-cid-bvzihdzo> <article data-astro-cid-bvzihdzo> <div class="hero-image" data-astro-cid-bvzihdzo> <img src="https://images.unsplash.com/photo-1726571175984-96bae5054c26?&w=720&h=360&fit=crop" alt="" data-astro-cid-bvzihdzo> </div> <div class="prose" data-astro-cid-bvzihdzo> <div class="title" data-astro-cid-bvzihdzo> <div class="date" data-astro-cid-bvzihdzo> <time datetime="2024-04-14T00:00:00.000Z"> 2024å¹´4æœˆ14æ—¥ </time>  </div> <h1 data-astro-cid-bvzihdzo>å‰ç«¯è¿›é˜¶ä¹‹æœ€é•¿é€’å¢å­åºåˆ—ç®—æ³•å’Œvue.jsä¸­çš„Diffç®—æ³•</h1> <hr data-astro-cid-bvzihdzo> </div>  <p>å‰ç«¯è¿›é˜¶ä¹‹æœ€é•¿é€’å¢å­åºåˆ—ç®—æ³•å’Œvue.jsä¸­çš„Diffç®—æ³•</p>
<h2 id="æœ€é•¿é€’å¢å­åºåˆ—">æœ€é•¿é€’å¢å­åºåˆ—</h2>
<h3 id="ä»€ä¹ˆæ˜¯å­åºåˆ—">ä»€ä¹ˆæ˜¯å­åºåˆ—</h3>
<p><strong>å­åºåˆ—</strong>çš„æ¦‚å¿µæ´¾ç”Ÿè‡ªæ•°ç»„ï¼Œé€šè¿‡åˆ é™¤ï¼ˆæˆ–ä¸åˆ é™¤ï¼‰æ•°ç»„ä¸­çš„å…ƒç´ è€Œä¸æ”¹å˜å…¶ä½™å…ƒç´ çš„é¡ºåºï¼Œå¾—åˆ°çš„æ•°ç»„å°±æ˜¯åŸæ•°ç»„çš„å­åºåˆ—ã€‚
ä¾‹å¦‚ï¼Œ[3,6,2,7] æ˜¯æ•°ç»„ [0,3,1,6,2,2,7] çš„å­åºåˆ—ã€‚</p>
<p><a href="https://leetcode.cn/problems/longest-increasing-subsequence/description/">[Leetcode] 300. æœ€é•¿é€’å¢å­åºåˆ—</a></p>
<p>æœ€é•¿é€’å¢å­åºåˆ—é—®é¢˜æ˜¯ä¸€ä¸ªç»å…¸çš„ç®—æ³•é—®é¢˜ï¼Œé€šè¿‡åŠ¨æ€è§„åˆ’å¯ä»¥å¾ˆå¥½åœ°ç†è§£å’Œè§£å†³è¿™ä¸ªé—®é¢˜ã€‚ä½†æ˜¯åœ¨å¤„ç†å¤§æ•°æ®é›†æ—¶ï¼Œæ›´å¥½çš„æ–¹å¼æ˜¯ä½¿ç”¨<strong>äºŒåˆ†æŸ¥æ‰¾æ³•</strong>å°†æ—¶é—´å¤æ‚åº¦ä¼˜åŒ–åˆ° <code>O(nlogn)</code>ã€‚</p>
<h2 id="vuejsçš„diffç®—æ³•">vue.jsçš„Diffç®—æ³•</h2>
<p>åœ¨Vue.jsä¸­ï¼ŒDiffç®—æ³•æ˜¯è™šæ‹ŸDOMç®—æ³•çš„æ ¸å¿ƒéƒ¨åˆ†ï¼Œå®ƒè´Ÿè´£æ¯”è¾ƒæ–°æ—§ä¸¤ä¸ªè™šæ‹ŸDOMæ ‘çš„å·®å¼‚ï¼Œå¹¶è®¡ç®—å‡ºæœ€å°çš„æ›´æ–°æ“ä½œæ¥åº”ç”¨åˆ°çœŸå®çš„DOMä¸Šï¼Œä»è€Œè¾¾åˆ°æ¸²æŸ“æ€§èƒ½æé«˜çš„æœ€ç»ˆç›®æ ‡ã€‚</p>
<p><strong>DOMæœ‰å“ªå‡ ç§æ“ä½œï¼š</strong></p>
<ol>
<li>æŒ‚è½½ï¼›</li>
<li>å¸è½½ï¼›</li>
<li>ä¿®æ”¹ï¼ˆæ–‡æœ¬èŠ‚ç‚¹çš„å˜æ›´ï¼‰ï¼›</li>
</ol>
<p>ç§»åŠ¨DOMæ€»æ¯”åˆ é™¤&#x26;åˆ›å»ºDOMæ›´é«˜æ•ˆï¼Œåœ¨è·å–æœ€å¤§ç§»åŠ¨æ¬¡æ•°çš„å‰æä¸‹ï¼Œå‰©ä¸‹çš„å°±æ˜¯éœ€è¦æ·»åŠ ï¼ˆæ–°çš„VDom)å’Œåˆ é™¤ï¼ˆæ—§çš„VDomï¼‰çš„domå…ƒç´ ã€‚</p>
<ul>
<li>åˆ¤æ–­æ˜¯å¦æœ‰èŠ‚ç‚¹éœ€è¦ç§»åŠ¨ï¼Œä»¥åŠåº”è¯¥å¦‚ä½•ç§»åŠ¨;</li>
<li>æ‰¾å‡ºé‚£äº›éœ€è¦è¢«æ·»åŠ æˆ–ç§»é™¤çš„èŠ‚ç‚¹</li>
</ul>
<h2 id="vue-diffç®—æ³•çš„ä¸€äº›å‰æ">Vue Diffç®—æ³•çš„ä¸€äº›å‰æ</h2>
<ul>
<li>æ¯”è¾ƒåªä¼šåœ¨åŒå±‚çº§è¿›è¡Œ, ä¸ä¼šè·¨å±‚çº§æ¯”è¾ƒï¼›</li>
<li>åœ¨æ¯”è¾ƒåŒå±‚çº§çš„å¤šä¸ªå­èŠ‚ç‚¹æ—¶ï¼ŒVue.jsä¼šä»ä¸¤ç«¯ï¼ˆå¤´éƒ¨å’Œå°¾éƒ¨ï¼‰å¼€å§‹è¿›è¡Œæ¯”è¾ƒï¼Œè¿™æ ·å¯ä»¥å¿«é€Ÿå¤„ç†é‚£äº›ä»…åœ¨å¤´éƒ¨æˆ–å°¾éƒ¨å‘ç”Ÿå˜åŒ–çš„æƒ…å†µï¼›</li>
<li>å‡å¦‚å½“å‰èŠ‚ç‚¹VNodeTypeæˆ–keyä¸åŒï¼ŒVue.jsä¼šè®¤ä¸ºè¿™æ˜¯ä¸¤ä¸ªå®Œå…¨ä¸åŒçš„èŠ‚ç‚¹ï¼Œä¼šè¿›è¡Œæ›¿æ¢æ“ä½œã€‚å¦‚æœèŠ‚ç‚¹ç›¸åŒï¼ŒVue.jsä¼šæ£€æŸ¥èŠ‚ç‚¹çš„å±æ€§å’Œå­èŠ‚ç‚¹ï¼Œå¹¶é€’å½’åœ°åº”ç”¨Diffç®—æ³•ã€‚</li>
</ul>
<h2 id="vueä¸­ç”¨åˆ°çš„ä¸€äº›diffæ–¹å¼">vueä¸­ç”¨åˆ°çš„ä¸€äº›Diffæ–¹å¼</h2>
<ol>
<li>ç®€å•Diffï¼›</li>
<li>åŒç«¯Diffï¼›</li>
<li>å¿«é€ŸDiffï¼›</li>
</ol>
<h3 id="ç®€å•diff">ç®€å•Diff</h3>
<p>éå†æ–°æ—§ä¸¤ç»„å­èŠ‚ç‚¹ä¸­æ•°é‡è¾ƒå°‘çš„é‚£ä¸€ç»„ï¼Œå¹¶é€ä¸ªè°ƒç”¨<code>patch</code>å‡½æ•°è¿›è¡Œæ‰“è¡¥ä¸ï¼Œç„¶åæ¯”è¾ƒæ–°æ—§ä¸¤ç»„å­èŠ‚ç‚¹çš„æ•°é‡ï¼Œå¦‚æœæ–°çš„ä¸€ç»„å­èŠ‚ç‚¹æ•°é‡æ›´å¤šï¼Œè¯´æ˜æœ‰æ–°å­èŠ‚ç‚¹éœ€è¦æŒ‚è½½ï¼›å¦åˆ™è¯´æ˜åœ¨æ—§çš„ä¸€ç»„å­èŠ‚ç‚¹ä¸­ï¼Œæœ‰èŠ‚ç‚¹éœ€è¦å¸è½½ã€‚</p>
<p>å¦å¤–ï¼Œå¯ä»¥é€šè¿‡ç»™èŠ‚ç‚¹å¢åŠ å±æ€§<code>key</code>ä½œä¸ºèº«ä»½æ ‡è¯†ç¬¦ï¼Œä»¥æ­¤æ¥ç¡®å®šæ–°æ—§èŠ‚ç‚¹çš„å¯¹åº”å…³ç³»ï¼Œä»è€Œæ‰¾å‡ºå¯å¤ç”¨çš„èŠ‚ç‚¹ã€‚</p>
<p>ç„¶åï¼Œæ‹¿æ–°çš„ä¸€ç»„å­èŠ‚ç‚¹ä¸­çš„èŠ‚ç‚¹å»æ—§çš„ä¸€ç»„å­èŠ‚ç‚¹ä¸­å¯»æ‰¾å¯å¤ç”¨çš„èŠ‚ç‚¹ã€‚å¦‚æœæ‰¾åˆ°äº†ï¼Œåˆ™è®°å½•è¯¥èŠ‚ç‚¹çš„ä½ç½®ç´¢å¼•ã€‚æˆ‘ä»¬æŠŠè¿™ä¸ªä½ç½®ç´¢å¼•ç§°ä¸ºæœ€å¤§ç´¢å¼•ã€‚åœ¨æ•´ä¸ªæ›´æ–°è¿‡ç¨‹ä¸­ï¼Œå¦‚æœä¸€ä¸ªèŠ‚ç‚¹çš„ç´¢å¼•å€¼å°äºæœ€å¤§ç´¢å¼•ï¼Œåˆ™è¯´æ˜è¯¥èŠ‚ç‚¹å¯¹åº”çš„çœŸå® DOM å…ƒç´ éœ€è¦ç§»åŠ¨ã€‚</p>
<h3 id="åŒç«¯diff">åŒç«¯Diff</h3>
<ol>
<li>å¯¹äºæ–°æ—§ä¸¤ç»„å­èŠ‚ç‚¹ï¼Œé¦–å…ˆåˆ†åˆ«å¯¹å¤´éƒ¨å’Œå°¾éƒ¨è¿›è¡Œå¯¹æ¯”ï¼Œæ‰¾å‡ºæœªç§»åŠ¨çš„èŠ‚ç‚¹ã€‚</li>
<li>åœ¨ä¸Šä¸€æ­¥å®Œæˆåï¼Œåœ¨å¯¹æ¯”å®Œæˆåçš„åŸºç¡€ä¸Šï¼Œè¿›è¡Œäº¤å‰å¯¹æ¯”ï¼Œå³æ—§å¤´å’Œæ–°å°¾ï¼Œæ—§å°¾å’Œæ–°å¤´è¿›è¡Œå¯¹æ¯”ï¼Œè¿›ä¸€æ­¥æ‰¾å‡ºå¯å¤ç”¨çš„èŠ‚ç‚¹ã€‚</li>
<li>æ¥ä¸‹æ¥ï¼Œåœ¨å‰©ä½™æœªå¯¹æ¯”çš„èŠ‚ç‚¹ä¸­ï¼Œæ‰¾å‡ºå¯å¤ç”¨çš„èŠ‚ç‚¹ã€‚å…ˆæ˜¯åˆ›å»ºä¸€ä¸ªKey -> Index çš„å“ˆå¸Œè¡¨ï¼Œç”¨æ¥è®°å½•æ—§èŠ‚ç‚¹çš„ç´¢å¼•é¡ºåºã€‚ç„¶åé€šè¿‡éå†æ–°çš„ä¸€ç»„èŠ‚ç‚¹ï¼Œæ ¹æ®keyæ‰¾å‡ºå¯å¤ç”¨çš„èŠ‚ç‚¹ã€‚</li>
<li>å®Œæˆä¸Šè¿°ä¸‰æ­¥åï¼Œåˆ é™¤æœªå¤ç”¨çš„èŠ‚ç‚¹ï¼Œåˆ›å»ºæ–°å¢çš„èŠ‚ç‚¹ï¼Œå¹¶å¯¹å¤ç”¨çš„èŠ‚ç‚¹æ ¹æ®æ–°çš„é¡ºåºè¿›è¡Œç§»åŠ¨æ“ä½œã€‚</li>
</ol>
<p>åŒç«¯Diffç®—æ³•æ˜¯Vue.js 2ç”¨äºæ¯”è¾ƒæ–°æ—§ä¸¤ä¸ªå­èŠ‚ç‚¹çš„æ–¹å¼ã€‚å®ƒçš„æ ¸å¿ƒé€»è¾‘æ˜¯åœ¨æ–°æ—§ä¸¤ç»„å­èŠ‚ç‚¹çš„å››ä¸ªç«¯ç‚¹ä¹‹é—´åˆ†åˆ«è¿›è¡Œæ¯”è¾ƒï¼Œå¹¶è¯•å›¾æ‰¾åˆ°å¯å¤ç”¨çš„èŠ‚ç‚¹ã€‚ç›¸æ¯”ç®€å•Diffç®—æ³•ï¼ŒåŒç«¯Diffç®—æ³•çš„ä¼˜åŠ¿åœ¨äºï¼Œå¯¹äºåŒæ ·çš„æ›´æ–°åœºæ™¯ï¼Œæ‰§è¡Œçš„DOMç§»åŠ¨æ“ä½œæ¬¡æ•°æ›´å°‘ã€‚</p>
<h3 id="å¿«é€Ÿdiff">å¿«é€ŸDiff</h3>
<p>è¿™æ˜¯vue3é‡‡ç”¨çš„Diffç®—æ³•ã€‚</p>
<p>é€šè¿‡keyç¡®å®šå½“å‰èŠ‚ç‚¹æ˜¯å¦å¯å¤ç”¨ï¼Œå‡å¦‚keyç›¸ç­‰ï¼Œåˆ™åªé’ˆå¯¹å½“å‰èŠ‚ç‚¹ä¸‹çš„å­èŠ‚ç‚¹<code>children</code>è¿›è¡Œdiffã€‚</p>
<h4 id="é¢„å¤„ç†æ“ä½œ">é¢„å¤„ç†æ“ä½œ</h4>
<blockquote>
<p>ã€Œå»é™¤ç›¸åŒå‰ç½®å’Œåç½®å…ƒç´ ã€ ï¼Œæ­¤ä¼˜åŒ–ç”± <strong>Neil Fraser</strong> æå‡ºï¼Œå¯ä»¥æ¯”è¾ƒå®¹æ˜“å®ç°è€Œä¸”å¸¦æ¥å¸¦æ¥æ¯”è¾ƒæ˜æ˜¾çš„æå‡ï¼›</p>
</blockquote>
<p>å…ˆå¤„ç†æ‰ç›¸åŒçš„å‰ç½®èŠ‚ç‚¹å’Œåç½®èŠ‚ç‚¹ï¼Œå‡å¦‚ç”¨å­—ç¬¦ä¸²ä½œä¸ºä¾‹å­ğŸŒ°å»æè¿°çš„è¯ï¼Œåº”è¯¥æ˜¯æ˜¯è¿™æ ·çš„ï¼š</p>
<pre class="astro-code github-dark" style="background-color:#24292e;color:#e1e4e8; overflow-x: auto;" tabindex="0" data-language="js"><code><span class="line"><span style="color:#6A737D">// é¢„å¤„ç†ä¹‹å‰çš„æ•°æ®</span></span>
<span class="line"><span style="color:#F97583">let</span><span style="color:#E1E4E8"> oldStr </span><span style="color:#F97583">=</span><span style="color:#9ECBFF"> "I'm OK"</span></span>
<span class="line"><span style="color:#F97583">let</span><span style="color:#E1E4E8"> newStr </span><span style="color:#F97583">=</span><span style="color:#9ECBFF"> "I am not OK"</span></span>
<span class="line"><span style="color:#6A737D">// é¢„å¤„ç†å®Œæˆåçš„æ•°æ®</span></span>
<span class="line"><span style="color:#E1E4E8">oldStr </span><span style="color:#F97583">=</span><span style="color:#9ECBFF"> "'m"</span></span>
<span class="line"><span style="color:#E1E4E8">newStr </span><span style="color:#F97583">=</span><span style="color:#9ECBFF"> " am not"</span></span>
<span class="line"></span></code></pre>
<p>åŸå­—ç¬¦ä¸²ä¸­ç›¸åŒçš„å‰ç½®éƒ¨åˆ†çš„<code>I</code> å’Œ åç½®éƒ¨åˆ†çš„<code> OK</code>è¢«å¤„ç†æ‰ï¼Œåªä¿ç•™å†…å®¹ä¸åŒçš„éƒ¨åˆ†ã€‚ç„¶åå†æŠŠæ—§çš„å­å­—ç¬¦ä¸²ï¼ˆ<code>'m</code>ï¼‰åˆ æ‰ï¼Œæ–°çš„å­å­—ç¬¦ä¸²ï¼ˆ<code> am not</code>ï¼‰æ·»åŠ è¿›å»å³å¯ã€‚</p>
<p><em><strong>ä½†æ˜¯ï¼Œå¯¹ä½ ä¸€å®šä¼šè¯´ä½†æ˜¯ã€‚</strong></em></p>
<p>è¿™ç§æƒ…å†µæ˜¯æ¯”è¾ƒç†æƒ³çš„ä¸€ç§æƒ…å†µï¼Œå‡å¦‚æ²¡æœ‰ä»»ä½•ç›¸åŒçš„å‰ç½®å’Œåç½®èŠ‚ç‚¹ï¼Œä¸”å­˜åœ¨ä¹±åºçš„å¯å¤ç”¨DOMèŠ‚ç‚¹ï¼Œåº”è¯¥å¦‚ä½•æ‰èƒ½æœ€å¤§é™åº¦çš„å‡å°‘DOMçš„æ“ä½œæ¬¡æ•°å‘¢ï¼Ÿè¿™æ—¶å€™å°±å¯ä»¥ç”¨åˆ°<strong>æœ€é•¿é€’å¢å­åºåˆ—</strong>ç®—æ³•äº†ã€‚</p>
<h3 id="ä¸ºä»€ä¹ˆæœ€é•¿é€’å¢å­åºåˆ—èƒ½ä¿è¯domæ“ä½œæ¬¡æ•°æœ€å°‘">ä¸ºä»€ä¹ˆæœ€é•¿é€’å¢å­åºåˆ—èƒ½ä¿è¯DOMæ“ä½œæ¬¡æ•°æœ€å°‘ï¼Ÿ</h3>
<p><strong>å­åºåˆ—</strong>çš„ç‰¹ç‚¹å°±æ˜¯å…ƒç´ åœ¨åŸæ•°ç»„çš„ä¸­ç›¸å¯¹ä½ç½®ä¿æŒä¸€è‡´ï¼Œå³å‡å¦‚å…ƒç´ <code>x</code>åœ¨åŸæ•°ç»„ä¸­å¤„äºå…ƒç´ <code>y</code>çš„åé¢ï¼Œé‚£ä¹ˆåœ¨å­åºåˆ—ä¸­ä¹Ÿä¸€å®šä¼šå¤„åœ¨å…ƒç´ <code>y</code>çš„åé¢ã€‚
ç°åœ¨æˆ‘ä»¬æŠŠæ•°ç»„å…ƒç´ æ¢æˆDOMå…ƒç´ çš„è¯ï¼Œå­åºåˆ—å°±èƒ½ä¿è¯æ–°æ—§DOMä¸­çš„å…ƒç´ ä½ç½®å…³ç³»ä¸ä¼šå˜ã€‚
<strong>æœ€é•¿</strong>èƒ½ä¿è¯æœ€å¤šçš„DOMå…ƒç´ ä½ç½®å…³ç³»æ²¡æœ‰å˜æ›´ï¼Œä»è€Œç¡®ä¿éœ€è¦DOMå˜åŠ¨çš„æ¬¡æ•°æœ€å°‘ã€‚</p>
<h2 id="patchflag--ä¸€ä¸ªå°æ’æ›²">PatchFlag â€”â€” ä¸€ä¸ªå°æ’æ›²</h2>
<blockquote>
<p>Vue 3å€ŸåŠ©PatchFlagå®ç°äº†<strong>é¶å‘æ›´æ–°</strong></p>
</blockquote>
<p>åœ¨Vue 2ä¸­ï¼Œæ¯æ¬¡æ›´æ–°éƒ½éœ€è¦è¿›è¡Œå…¨é‡å¯¹æ¯”ï¼Œè€ŒVue 3é€šè¿‡å¼•å…¥é™æ€æ ‡è®°æ¥å‡å°‘éåŠ¨æ€å†…å®¹çš„å¯¹æ¯”æ¶ˆè€—ã€‚è¿™ç§æ–¹æ³•åªå¯¹æ¯”å¸¦æœ‰æ ‡è®°çš„éƒ¨åˆ†ï¼Œä»è€Œæé«˜äº†æ›´æ–°çš„æ•ˆç‡ã€‚å…·ä½“å®ç°æ˜¯åœ¨<code>compile</code>é˜¶æ®µå°†è·å–çš„<code>PatchFlag</code>ä¿¡æ¯å­˜å‚¨åˆ°VNodeä¸Šã€‚å½“åœ¨è¿›è¡ŒDiffæ—¶ï¼Œé’ˆå¯¹ä¸åŒç±»å‹çš„<code>PatchFlag</code>ï¼Œè¿›è¡Œä¸åŒçš„å¤„ç†å¤„ç†ï¼Œä»¥è¾¾åˆ°é™ä½Diffæˆæœ¬çš„ç›®çš„ã€‚å‡å¦‚æ²¡æœ‰æ ‡è®°typeä¿¡æ¯ï¼Œåˆ™æŒ‰ç…§ä¼ ç»Ÿæµç¨‹è¿›è¡Œfull diffã€‚</p>
<p>ä¾‹å¦‚ï¼Œå¦‚æœä¸€ä¸ªèŠ‚ç‚¹åªæœ‰classå±æ€§å¯èƒ½å˜åŒ–ï¼Œé‚£ä¹ˆåœ¨patchè¿‡ç¨‹ä¸­åªéœ€è¦æ£€æŸ¥classå±æ€§ï¼Œè€Œä¸æ˜¯è¿›è¡Œå…¨å±æ€§æ¯”è¾ƒã€‚</p>
<p>é™æ€æ ‡è®°ä½¿ç”¨<strong>ä½è¿ç®—ç¬¦</strong>è¿›è¡Œç»„åˆå’Œæ£€æŸ¥ã€‚ä¾‹å¦‚ï¼Œå¯ä»¥é€šè¿‡<code>|</code>è¿ç®—ç¬¦æ¥ç»„åˆå¤šä¸ªæ ‡è®°ï¼Œä½¿ç”¨<code>&#x26;</code>è¿ç®—ç¬¦æ¥æ£€æŸ¥æŸä¸ªæ ‡è®°æ˜¯å¦å­˜åœ¨ã€‚</p>
<h3 id="patchflag-æœ‰å“ªäº›ç±»å‹">PatchFlag æœ‰å“ªäº›ç±»å‹</h3>
<ul>
<li>TEXTï¼šåŠ¨æ€æ–‡æœ¬èŠ‚ç‚¹</li>
<li>CLASSï¼šåŠ¨æ€classç»‘å®š</li>
<li>STYLEï¼šåŠ¨æ€style</li>
<li>PROPSï¼šåŠ¨æ€å±æ€§ï¼Œä¸åŒ…æ‹¬ç±»åå’Œæ ·å¼</li>
<li>FULL_PROPSï¼šåŠ¨æ€keyï¼Œå½“keyå˜åŒ–æ—¶éœ€è¦å®Œæ•´çš„diffç®—æ³•æ¯”è¾ƒ</li>
<li>HYDRATE_EVENTSï¼šå¸¦æœ‰äº‹ä»¶ç›‘å¬å™¨çš„èŠ‚ç‚¹</li>
<li>STABLE_FRAGMENTï¼šå­èŠ‚ç‚¹é¡ºåºä¸å˜çš„Fragment</li>
<li>KEYED_FRAGMENTï¼šå¸¦æœ‰keyå±æ€§çš„Fragment</li>
<li>UNKEYED_FRAGMENTï¼šå­èŠ‚ç‚¹æ²¡æœ‰keyçš„Fragment</li>
<li>NEED_PATCHï¼šåªéœ€è¦non-propsä¿®è¡¥çš„å…ƒç´ </li>
<li>DYNAMIC_SLOTSï¼šåŠ¨æ€çš„slot</li>
<li>DEV_ROOT_FRAGMENTï¼šä»…å› ä¸ºç”¨æˆ·åœ¨æ¨¡æ¿æ ¹çº§åˆ«æ”¾ç½®æ³¨é‡Šè€Œåˆ›å»ºçš„ç‰‡æ®µï¼ˆå¼€å‘æ—¶ä½¿ç”¨çš„æ ‡å¿—ï¼‰</li>
<li>HOISTEDï¼šå·²æå‡çš„é™æ€vnodeï¼Œæ›´æ–°æ—¶è·³è¿‡æ•´ä¸ªå­æ ‘</li>
<li>BAILï¼šæŒ‡ç¤ºdiffç®—æ³•é€€å‡ºä¼˜åŒ–æ¨¡å¼</li>
</ul>  </div> </article> </main> <footer class="text-sm leading-[1.75] mt-4" data-astro-cid-sz7xmlte> <div data-astro-cid-sz7xmlte> <span data-astro-cid-sz7xmlte> <a rel="license" href="https://creativecommons.org/licenses/by-nc/4.0/" target="_blank" class="text-slate-400 text-xs" data-astro-cid-sz7xmlte>ç½²å-éå•†ä¸šæ€§ä½¿ç”¨ 4.0 å›½é™…è®¸å¯åè®®<br data-astro-cid-sz7xmlte>
è½¬è½½è¯·ä¿ç•™åŸæ–‡é“¾æ¥åŠä½œè€…</a> </span> </div> </footer>  </body></html>